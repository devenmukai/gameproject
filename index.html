<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js"></script>
    <script defer src="https://unpkg.com/p5.collide2d"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/addons/p5.sound.min.js"></script>
    <style>
      body {
        width: 100%;
        height: 100%;
        margin: 0px;
        border: 0;
        overflow: hidden;
        display: block;
      }
      h1 {
        background-color: lightblue;
      }
    </style> 
  </head>
  <body>
    <script>
      var w = window.innerWidth;
      var h = window.innerHeight;
      var player;
      var badguy;
      var goodpoint;
      var bullets;
      pointcount = 0;
      timer = 0;
      var hit = false;
      function setup() {
        createCanvas(w,h);
        player = new player();
        badguy = new badguy();
        goodpoint = new goodpoint();
        bullets = new bullets();
      }
      
      function draw() {
        clear();
        player.show();
        player.update();
        badguy.show();
        goodpoint.show();
        goodpoint.update();
        bullets.show();
        bullets.update();
        
        
        hit = collideRectCircle(player.x,player.y,player.width,player.height,goodpoint.x,goodpoint.y,goodpoint.width);
        if (hit === true) {
          pointcount += 1
          document.getElementById('scorecount').innerHTML = "Score:" + pointcount
          randx = random(1,3)
          randy = random(1,3)
          if(randx = 1) {
            goodpoint.x = random(30,w/3)
          }
          else {
            goodpoint.x = random(w*2/3,w-30)
          }
          if(randy = 1) {
            goodpoint.y = random(30,w/3)
          }
          else {
            goodpoint.y = random(h*2/3,h-30)
          }
          
        }
       /* if(((goodpoint.x > badguy.x - 200)&&(goodpoint.x < badguy.x + 200))||((goodpoint.y > badguy.y - 200)&&(goodpoint.y < badguy.y + 200))) {
          goodpoint.x = random(0,w-100)
          goodpoint.y = random(0,h-150)
        }*/
      }
      
      function player() {
        this.x = w/4
        this.y = h/2
        this.width = 50
        this.height = 50
        this.show = function() {
          fill(color('red'));
          rect(this.x,this.y,this.width,this.height);
        }
        this.update = function() {
          if((keyIsDown(65)) && (this.x > 0)) {
               this.x = this.x - 10;
           }
          if((keyIsDown(68)) && (this.x < w - this.width)) {
               this.x = this.x + 10;
           }
          if((keyIsDown(83)) && (this.y < h - 90)) {
               this.y = this.y + 10;
           }
          if((keyIsDown(87)) && (this.y > 5)) {
               this.y = this.y - 10;
           }
        }
      }
        function badguy() {
          this.x = w/2;
          this.y = h/2;
          this.width = 50;
          this.height = 50;
          life = 1;
          this.show = function() {
            fill(color('red'));
            ellipse(this.x,this.y,this.width,this.height);
          }
        }
      
        function goodpoint() {
           randx = random(1,2)
           randy = random(1,2)
          if(randx = 1) {
            this.x = random(0,w/3)
          }
          else {
            this.x = random(w*2/3,w-30)
          }
          if(randy = 1) {
            this.y = random(30,w/3)
          }
          else {
            this.y = random(h*2/3,h-30)
          }
          
         // this.x = random(0,w-100)
         // this.y = random(0,h-150)
          this.width = 50;
          this.height = 50;
          this.show = function() {
            fill(color('yellow'));
            ellipse(this.x,this.y,this.width,this.height);
          }
          this.update = function() {
            }
          }
          
          function bullets() {
            this.x = w/2
            var xmovement = random(-5,5)
            var ymovement = random(-5,5)
            this.y = h/2
            this.width = 10
            this.height = 10
            this.show = function() {
           
              fill(color('black'));
              ellipse(this.x,this.y,this.width,this.height);
              
            
            }
            this.update = function() {
              if(millis() >= 500) {
                
              this.x += xmovement
              this.y += ymovement
              timer = millis();
            
              
              }
            }
            
          }
        
        
        
        
      
    </script>
    <h1 id="scorecount">Score: 0</h1>
    <h1 id="lifecount">Life: 1</h1>
  </body>
</html>
